#!/usr/bin/env bash

if [[ $# -ne 2 ]]; then
    echo "Missing parameters."
    echo "`basename $0` <ELASTICSEARCH_HOST> <INDEX_NAME>"
    exit 1
fi

ELASTICSEARCH_HOST=$1
INDEX_NAME=$2

curl -X POST "http://${ELASTICSEARCH_HOST}:9200/${INDEX_NAME}/_search?search_type=count&pretty=true" -d '{
    "facets": {
        "count_by_type": {
            "terms": {
                "field": "_type"
            }
        }
    }
}'

exit 0
